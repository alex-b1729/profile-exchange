{% extends "base.html" %}
{% load thumbnail %}
{% load static %}

{% block title %}
My Content
{% endblock %}

{% block content %}

<h1>My Content</h1>
<p>Hey {{ request.user.username }}, here's all your content.</p>
<p>Mix and match these items in your <a href="{% url 'profile_list' %}">profiles</a>.</p>
<a href="{% url 'add_item' %}" class="btn btn-primary">Add Content</a>
<hr />

{% for content_type, objs in content_dict.items %}
<div class="card mb-3">
    <div class="card-header">
        {{ content_type|title }}
    </div>
    <div class="card-body">
        <ul class="list-group list-group-flush">
            {% for obj in objs %}
            <li class="list-group-item">
                {{ obj.render|safe }}
                {% with related=obj.content_related.all %}
                {% if related %}
                <p>
                    <span class="text-muted">Profiles: </span>
                    {% for r in related %}
                    <a href="{{ r.profile.get_absolute_url }}">{{ r.profile.title }}</a>
                    {% if not forloop.last %} | {% endif %}
                    {% endfor %}
                </p>
                {% endif %}
                {% endwith %}
                <a href="#">Edit</a>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% empty %}
<a href="#">Add content!</a>
{% endfor %}

{% endblock %}