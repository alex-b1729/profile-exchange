{% extends "base.html" %}
{% load thumbnail %}
{% load static %}

{% block title %}
My Content
{% endblock %}

{% block content %}

<h1>My Content</h1>
<p>Hey {{ request.user.username }}, here's all your content.</p>
<p>Mix and match this in your <a href="{% url 'profile_list' %}">profiles</a>.</p>

<hr />

{% with emails=request.user.email_related.all %}
<div class="card mb-3">
    <div class="card-header">
        Email
        <a href="{% url 'item_create' 'email' %}" class="btn btn-primary">
            New
        </a>
    </div>
    <div class="card-body">
        {% if emails %}
        <ul class="list-group list-group-flush">
            {% for email in emails %}
            <li class="list-group-item">
                <span class="text-muted">{{ email.get_type_display }}</span>
                <a href="mailto:{{ email.email_address }}">{{ email.email_address }}</a>
                <a href="{% url 'item_update' 'email' email.pk %}">Edit</a>
                <form
                    method="post"
                    onsubmit="return confirm('Are you sure you wish to delete this email?');"
                    action="{% url 'item_delete' 'email' email.pk %}">
                    <button class="btn btn-link" type="submit" value="deleted">Delete</button>
                    {% csrf_token %}
                </form>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        Add an email to include in your profiles
        {% endif %}
    </div>
</div>
{% endwith %}

{% with phones=request.user.phone_related.all %}
<div class="card mb-3">
    <div class="card-header">
        Phone
        <a href="{% url 'item_create' 'phone' %}" class="btn btn-primary">
            New
        </a>
    </div>
    <div class="card-body">
        {% if phones %}
        <ul class="list-group list-group-flush">
            {% for phone in phones %}
            <li class="list-group-item">
                <span class="text-muted">{{ phone.get_type_display }}</span>
                {{ phone.phone_number }}
                <a href="{% url 'item_update' 'phone' phone.pk %}">Edit</a>
                <form
                    method="post"
                    onsubmit="return confirm('Are you sure you wish to delete this phone number?');"
                    action="{% url 'item_delete' 'phone' phone.pk %}">
                    <button class="btn btn-link" type="submit" value="deleted">Delete</button>
                    {% csrf_token %}
                </form>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        Add a phone number to include in your profiles
        {% endif %}
    </div>
</div>
{% endwith %}

{% with links=request.user.link_related.all %}
<div class="card mb-3">
    <div class="card-header">
        Links
        <a href="{% url 'item_create' 'link' %}" class="btn btn-primary">
            New
        </a>
    </div>
    <div class="card-body">
        {% if links %}
        <ul class="list-group list-group-flush">
            {% for link in links %}
            <li class="list-group-item">
                <span class="text-muted">{{ link.get_type_display }}</span>
                <a href="{{ link.url }}">{{ link.url }}</a>
                <a href="{% url 'item_update' 'link' link.pk %}">Edit</a>
                <form
                    method="post"
                    onsubmit="return confirm('Are you sure you wish to delete this link?');"
                    action="{% url 'item_delete' 'link' link.pk %}">
                    <button class="btn btn-link" type="submit" value="deleted">Delete</button>
                    {% csrf_token %}
                </form>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        Add an external link to include in your profiles
        {% endif %}
    </div>
</div>
{% endwith %}

{% with addrs=request.user.address_related.all %}
<div class="card mb-3">
    <div class="card-header">
        Mailing
        <a href="{% url 'item_create' 'address' %}" class="btn btn-primary">
            New
        </a>
    </div>
    <div class="card-body">
        {% if addrs %}
        <ul class="list-group list-group-flush">
            {% for addr in addrs %}
            <li class="list-group-item">
                <div class="d-md-flex">
                    <div class="me-3">
                        <p class="text-muted">{{ addr.get_type_display }}</p>
                    </div>
                    <div class="justify-content-left flex-wrap">
                        {{ addr.street1 }}<br>
                        {% if addr.street2 %}{{ addr.street2 }}<br>{% endif %}
                        {{ addr.city }}, {{ addr.state }} {{ addr.zip }}<br>
                        {% if addr.country %}{{ addr.country }}{% endif %}
                        <a href="{% url 'item_update' 'address' addr.pk %}">Edit</a>
                        <form
                            method="post"
                            onsubmit="return confirm('Are you sure you wish to delete this address?');"
                            action="{% url 'item_delete' 'address' addr.pk %}">
                            <button class="btn btn-link" type="submit" value="deleted">Delete</button>
                            {% csrf_token %}
                        </form>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        Add an address to include in your profiles
        {% endif %}
    </div>
</div>
{% endwith %}

{% endblock %}